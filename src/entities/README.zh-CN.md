# 模块: `entities` (逻辑层 - 游戏对象)

该目录是**逻辑**层的核心部分。它包含了游戏世界中存在并互动的所有独立“角色”或对象的类定义。

每个实体都负责自己的状态、行为和外观。它们遵循一个标准模式：
-   一个用于初始化状态的 `constructor`，通常从 `../data` 目录中相应的配置对象获取数据。
-   一个 `update(dt)` 方法，定义其单帧的逻辑（例如，移动、AI、计时器）。
-   一个 `draw(ctx)` 方法，负责在HTML5画布上渲染自身。

---

## 实体详解

### `Player.ts`
-   **职责:** 代表玩家角色。
-   **功能:** 管理玩家状态（生命值、经验、位置、属性），根据输入处理移动，并拥有 `Weapon` 和 `Skill` 实例的数组。实现了一个8方向的精灵动画系统。

### `Weapon.ts`
-   **职责:** 管理可装备武器的逻辑。
-   **功能:** 跟踪自身的属性和等级，管理其开火冷却时间，并负责创建投射物。包含 `levelUp()` 方法，该方法应用 `upgradeData.ts` 中的下一个升级。

### `Skill.ts`
-   **职责:** 代表一个主动或被动技能。
-   **功能:** 管理自身的属性和等级。主动技能处理自己的冷却时间以创建 `SkillEffect` 对象。被动技能在获得或升级时直接将其效果应用于玩家。

### `Enemy.ts`
-   **职责:** 敌对生物的蓝图。
-   **功能:** 管理其状态（生命值、位置）并实现核心AI行为：直接向玩家移动。它还管理施加于其上的任何活动状态效果。

### 投射物 (`Projectile.ts`, `BoomerangProjectile.ts`, `LaserProjectile.ts`)
-   **职责:** 代表从武器发射的投射物。
-   **功能:** 这些是自包含的对象，管理自己的移动、碰撞逻辑（穿透）和生命周期。

### `XpOrb.ts`
-   **职责:** 代表敌人掉落的经验值宝石。在被收集前是一个静态对象。它可以是几个等级之一（小、中、大），具有不同的价值。

### `Item.ts`
-   **职责:** 代表地面上可收集的消耗品，如生命药水。

### 视觉效果 (`AuraEffect.ts`, `PulseEffect.ts`, `Particle.ts`)
-   **职责:** 这些是纯视觉实体。
-   **功能:**
    -   `AuraEffect` & `PulseEffect`: 渲染一个扩大的环来可视化范围效果攻击。
    -   `Particle`: 代表一个用于效果（如撞击或死亡）的单一、短暂的粒子。由 `ParticleSystem` 管理。
