# 🗡️ 新武器设计文档

> Sparkle Survivors v2.0 武器扩展提案
> 版本: 1.0 | 作者: AI Game Designer | 日期: 2026-01-06

---

## 📋 概述

本文档定义了 **4 条新武器进化线**，共 **12 把新武器**，填补现有系统的机制空白。

| 进化线 | 主题 | 填补空白 |
|--------|------|----------|
| 毒系 | 毒DoT + 近战 | 缺失的 POISON 状态效果 |
| 召唤系 | 环绕护卫 | 新增 ORBITING 武器类型 |
| 链式系 | 弹跳伤害 | 多目标链式传导 |
| 陷阱系 | 区域控制 | 防守/布阵玩法 |

---

## 🐍 毒系武器线 (Poison Line)

### 设计理念
以 **近战 + 持续毒伤** 为核心，填补 KATANA 孤立无进化线的空白，并引入 POISON 状态效果。

---

### T1: POISON_DAGGER 毒刃匕首

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `POISON_DAGGER` | |
| **图标** | 🗡️ | 绿色匕首 |
| **类型** | MELEE | |
| **伤害** | 25 | 基础刺击 |
| **冷却** | 1200ms | |
| **范围** | 60px | 短程刺击 |
| **穿透** | 3 | |
| **状态效果** | POISON | 100%触发 |
| **毒伤害** | 3 DPS | 持续4秒 |
| **标签** | MELEE, PHYSICAL, POISON | |

**视觉效果**:
- 攻击时呈绿色扇形挥砍
- 中毒敌人显示绿色毒气粒子
- 受击数字显示为绿色

---

### T2: VENOM_FANG 剧毒獠牙

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `VENOM_FANG` | |
| **图标** | 🐍 | 蛇形武器 |
| **类型** | MELEE | |
| **伤害** | 50 | |
| **冷却** | 1000ms | |
| **范围** | 90px | |
| **穿透** | 6 | |
| **状态效果** | POISON | 毒伤可叠加 |
| **毒伤害** | 8 DPS | 持续5秒，最多叠3层 |
| **标签** | MELEE, PHYSICAL, POISON | |

**进化条件**: `POISON_DAGGER` + `TOUGHNESS` (需要坚韧来承受近战风险)

**特殊机制**:
- 毒伤害可叠加，最多3层
- 3层满时敌人显示深绿色剧毒光环

---

### T3: PLAGUE_SCYTHE 瘟疫死神镰

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `PLAGUE_SCYTHE` | |
| **图标** | ☠️ | 死神镰刀 |
| **类型** | MELEE | |
| **伤害** | 100 | |
| **冷却** | 800ms | 快速收割 |
| **范围** | 140px | 大范围 |
| **穿透** | 999 | 无限穿透 |
| **状态效果** | PLAGUE | 瘟疫传播 |
| **毒伤害** | 15 DPS | 持续6秒 |
| **标签** | MELEE, MAGIC, POISON, AREA | |

**进化条件**: `VENOM_FANG` + `REGENERATION` (生命汲取抵消近战风险)

**特殊机制**:
- **瘟疫传播**: 中毒敌人死亡时，毒素扩散到周围3个敌人
- 镰刀轨迹留下绿色毒雾残影

---

## 👻 召唤系武器线 (Summoning Line)

### 设计理念
环绕型武器，类似魔法阵/圣经，以 **自动环绕攻击** 为核心，适合懒人流派。

---

### T1: SPIRIT_ORB 幽灵法球

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `SPIRIT_ORB` | |
| **图标** | 👻 | 幽灵小球 |
| **类型** | ORBITING | 新类型 |
| **伤害** | 15 | 每次接触 |
| **冷却** | 500ms | 伤害间隔 |
| **范围** | 80px | 环绕半径 |
| **数量** | 2 | 法球数量 |
| **旋转速度** | 90°/s | |
| **标签** | AREA, MAGIC, SUMMON | |

**视觉效果**:
- 2个半透明幽灵球环绕玩家
- 击中敌人时闪烁白光
- 拖尾效果

---

### T2: PHANTOM_GUARD 幻影守卫

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `PHANTOM_GUARD` | |
| **图标** | 👁️ | 眼睛/守卫 |
| **类型** | ORBITING | |
| **伤害** | 30 | |
| **冷却** | 400ms | |
| **范围** | 120px | |
| **数量** | 4 | |
| **旋转速度** | 120°/s | |
| **标签** | AREA, MAGIC, SUMMON | |

**进化条件**: `SPIRIT_ORB` + `HOLY_NOVA` (圣光强化幽灵)

**特殊机制**:
- 守卫偶尔发射小型追踪弹

---

### T3: SOUL_VORTEX 灵魂漩涡

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `SOUL_VORTEX` | |
| **图标** | 🌀 | 漩涡 |
| **类型** | ORBITING | |
| **伤害** | 50 | |
| **冷却** | 300ms | |
| **范围** | 180px | |
| **数量** | 8 | |
| **旋转速度** | 180°/s | 高速 |
| **特殊效果** | 吸引 | 轻微拉拽敌人 |
| **标签** | AREA, MAGIC, DARK, SUMMON | |

**进化条件**: `PHANTOM_GUARD` + `SWIFTNESS` (速度强化旋转)

**特殊机制**:
- 轻微吸引周围敌人 (引力场)
- 灵魂粒子在球体间流动

---

## ⛓️ 链式武器线 (Chain Line)

### 设计理念
**弹跳式链式伤害**，击中敌人后自动跳跃到附近目标，适合密集敌群。

---

### T1: CHAIN_BOLT 链锁闪击

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `CHAIN_BOLT` | |
| **图标** | ⛓️ | 锁链 |
| **类型** | CHAIN | 新类型 |
| **伤害** | 20 | 首次命中 |
| **伤害衰减** | 10% | 每次弹跳 |
| **冷却** | 2000ms | |
| **速度** | 400 | 弹射速度 |
| **弹跳次数** | 2 | |
| **弹跳范围** | 150px | |
| **标签** | PROJECTILE, MAGIC | |

**视觉效果**:
- 链条式闪电连接敌人
- 弹跳时显示锁链拖尾

---

### T2: SHOCK_CHAIN 电击锁链

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `SHOCK_CHAIN` | |
| **图标** | ⚡ | 电击 |
| **类型** | CHAIN | |
| **伤害** | 45 | |
| **伤害衰减** | 5% | |
| **冷却** | 1500ms | |
| **弹跳次数** | 4 | |
| **弹跳范围** | 200px | |
| **状态效果** | STUN | 0.3秒眩晕 |
| **标签** | PROJECTILE, MAGIC, LIGHTNING | |

**进化条件**: `CHAIN_BOLT` + `ELEMENTAL_MASTERY`

**特殊机制**:
- 被链接的敌人短暂眩晕
- 显示电弧效果

---

### T3: STORM_WEAVER 风暴织网者

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `STORM_WEAVER` | |
| **图标** | 🌩️ | 雷暴 |
| **类型** | CHAIN | |
| **伤害** | 80 | |
| **伤害衰减** | 0% | 无衰减 |
| **冷却** | 1200ms | |
| **弹跳次数** | 8 | |
| **弹跳范围** | 250px | |
| **状态效果** | STUN | 0.5秒眩晕 |
| **标签** | PROJECTILE, MAGIC, LIGHTNING, AREA | |

**进化条件**: `SHOCK_CHAIN` + `BALLISTICS`

**特殊机制**:
- 形成闪电网，链接所有被击中敌人
- 闪电网持续1秒，期间造成额外伤害

---

## 📌 陷阱系武器线 (Trap Line)

### 设计理念
**放置型区域控制**，玩家移动时自动在身后留下陷阱，适合风筝走位流派。

---

### T1: SPIKE_TRAP 尖刺陷阱

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `SPIKE_TRAP` | |
| **图标** | 📌 | 尖刺 |
| **类型** | TRAP | 新类型 |
| **伤害** | 30 | |
| **放置间隔** | 3000ms | 每3秒放一个 |
| **陷阱半径** | 40px | |
| **持续时间** | 8000ms | |
| **最大数量** | 5 | 场上最多5个 |
| **标签** | TRAP, PHYSICAL | |

**视觉效果**:
- 地面尖刺圆形陷阱
- 触发时尖刺弹起动画

---

### T2: FROST_MINE 寒冰地雷

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `FROST_MINE` | |
| **图标** | 💎 | 冰晶 |
| **类型** | TRAP | |
| **伤害** | 50 | |
| **放置间隔** | 2500ms | |
| **陷阱半径** | 60px | |
| **爆炸半径** | 100px | 触发后范围伤害 |
| **持续时间** | 10000ms | |
| **最大数量** | 6 | |
| **状态效果** | SLOW | 60%减速，3秒 |
| **标签** | TRAP, MAGIC, ICE, AREA | |

**进化条件**: `SPIKE_TRAP` + `SWIFTNESS` (跑得快放得多)

---

### T3: VOID_RIFT 虚空裂隙

| 属性 | 数值 | 说明 |
|------|------|------|
| **ID** | `VOID_RIFT` | |
| **图标** | 🌑 | 黑洞 |
| **类型** | TRAP | |
| **伤害** | 25/秒 | 持续伤害 |
| **放置间隔** | 4000ms | |
| **陷阱半径** | 100px | |
| **吸引力** | 30px/s | 拉拽敌人 |
| **持续时间** | 5000ms | |
| **最大数量** | 3 | 强力限制数量 |
| **标签** | TRAP, MAGIC, DARK, AREA | |

**进化条件**: `FROST_MINE` + `TOUGHNESS` (承受虚空侵蚀)

**特殊机制**:
- 持续吸引范围内敌人
- 虚空裂隙动画 (紫黑色旋涡)

---

## 🎨 UI 设计要点

### 新状态效果图标
| 效果 | 图标颜色 | 动画 |
|------|----------|------|
| POISON | 💚 绿色 | 毒气上升粒子 |
| STUN | 💫 黄色 | 星星环绕 |

### 新武器类型视觉规范
| 类型 | 特征 |
|------|------|
| ORBITING | 环绕玩家的浮动物体 |
| CHAIN | 闪电/锁链连接线 |
| TRAP | 地面静态物体 + 触发动画 |

---

## 📊 数值平衡参考

### DPS 对照表 (理论最大)
| 武器 | T1 DPS | T2 DPS | T3 DPS |
|------|--------|--------|--------|
| 毒系 | ~35 | ~85 | ~180 |
| 召唤系 | ~60 | ~300 | ~800 |
| 链式 | ~12 | ~45 | ~100 |
| 陷阱系 | ~10 | ~20 | ~15 |

> 召唤系DPS高但依赖敌人进入范围；陷阱系DPS低但提供控制价值

---

## ✅ 开发 Checklist

- [ ] 实现 POISON 状态效果 (`statusEffects.ts`)
- [ ] 实现 STUN 状态效果
- [ ] 新增 ORBITING 武器类型 (`Weapon.ts`)
- [ ] 新增 CHAIN 武器类型
- [ ] 新增 TRAP 武器类型
- [ ] 添加武器数据到 `weaponData.ts`
- [ ] 添加进化配方到 `evolutionData.ts`
- [ ] 绘制 12 个武器图标
- [ ] 绘制状态效果粒子动画
